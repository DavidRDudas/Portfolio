class Particle{constructor(t,i,s,h,a,e){this.x=t,this.y=i,this.vx=s,this.vy=h,this.radius=a,this.mass=e||a*a,this.charge=0,this.isFixed=!1}update(t){this.x+=this.vx*t,this.y+=this.vy*t}draw(t){if(t.beginPath(),t.arc(this.x,this.y,this.radius,0,2*Math.PI),this.isSun){t.fillStyle="#FFD700",t.fill(),this.eventHorizonRadius&&(t.beginPath(),t.arc(this.x,this.y,this.eventHorizonRadius,0,2*Math.PI),t.strokeStyle="rgba(255, 255, 255, 0.1)",t.stroke());const i=this.eventHorizonRadius||5*this.radius,s=t.createRadialGradient(this.x,this.y,this.radius,this.x,this.y,i);s.addColorStop(0,"rgba(255, 215, 0, 0.2)"),s.addColorStop(1,"rgba(255, 215, 0, 0)"),t.beginPath(),t.arc(this.x,this.y,i,0,2*Math.PI),t.fillStyle=s,t.fill()}else if(0!==this.charge){const i=this.charge>0?"#FF4444":"#4444FF";t.fillStyle=i,t.fill();const s=3*this.radius,h=8,a=this.charge>0?1:-1;t.strokeStyle=`${i}44`,t.lineWidth=1;for(let i=0;i<h;i++){const e=i/h*Math.PI*2;t.beginPath(),t.moveTo(this.x+this.radius*Math.cos(e),this.y+this.radius*Math.sin(e)),t.lineTo(this.x+s*Math.cos(e)*a,this.y+s*Math.sin(e)*a),t.stroke()}this.radius>8&&(t.fillStyle="white",t.font=`${this.radius}px Arial`,t.textAlign="center",t.textBaseline="middle",t.fillText(this.charge>0?"+":"-",this.x,this.y))}else if(this.mass>100)t.fillStyle="#FFD700",t.fill();else{const i=Math.sqrt(this.vx*this.vx+this.vy*this.vy),s=Math.min(i/5,120);if(t.fillStyle=`hsl(${s}, 70%, 50%)`,t.fill(),i>1){const i=Math.atan2(this.vy,this.vx),h=2*this.radius;t.beginPath(),t.moveTo(this.x,this.y),t.lineTo(this.x+Math.cos(i)*h,this.y+Math.sin(i)*h);const a=.5*this.radius,e=Math.PI/6;t.lineTo(this.x+Math.cos(i+Math.PI-e)*a,this.y+Math.sin(i+Math.PI-e)*a),t.moveTo(this.x+Math.cos(i)*h,this.y+Math.sin(i)*h),t.lineTo(this.x+Math.cos(i+Math.PI+e)*a,this.y+Math.sin(i+Math.PI+e)*a),t.strokeStyle=`hsla(${s}, 70%, 50%, 0.6)`,t.lineWidth=2,t.stroke()}}t.closePath()}}
